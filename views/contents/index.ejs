<% layout('layouts/boilerplate')%>
<div class="container">  
    <div class=" nav justify-content-center" style="margin-top:1px;">  
      <div class="card  mb-2 " style="max-width: 20rem;">  
            <div class="card-header"><h6>Upload csv file</h6></div>   
            <div class="card-body">   
               
                    <form action="/" method="post" enctype="multipart/form-data">  
                        <input type="file" name="csv"><br><br>
                     <div class="text-center"><button type="submit" class="btn btn-sm btn-info">Submit</button></div>     
                    </form>  
             </div>  
      </div>  
</div> 
    <h1>All Contents:</h1>
    <div>
        <h5><a href="/contents/new"  class="ml-4">Add Content</a></h5>
        <h5><a href="/contents/newcontent" class="ml-4">New Content</a></h5>
        <h5><a href="/contents/mostliked"  class="ml-4">Most Liked</a></h5>
        <h5><a href="/contents/mostviewed" class="ml-4">Most Viewed</a></h5> 
    </div>

    <ul>
        <% for(let content of contents ) {%>
           <div class="card" mb-3>
                <div class="row">
                    <div class="col-md-4">
                        <img class= "img-fluid" src="<%= content.image  %> " alt="">
                    </div>
                    <div class="col-md-8">
                        <div class="card-body">
                            <h5 class="card-title"><%= content.title %></h5>
                            <p class="card-text"><%= content.story %> </p>
                            <a class="btn btn-primary" href="/contents/<%= content._id %>">Show</a>
                            <% var currDate = content.datePublished.getDate() + "/" + content.datePublished.getMonth() + 1 +"/" +content.datePublished.getFullYear(); %> 
                            <p class="mt-3">Date Published: <%= currDate %></p>
                             <p class="mt-3"><%= content.likes.length %> Likes</p>
                             <p class="mt-3"><%= content.viewCount %> Views</p>
                        </div>
                    </div>
                </div>
           </div>
        <% }%> 
    </ul>
